<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expo Registration</title>
<style>
/* 1. Global Reset */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* 2. BODY - BACKGROUND CHANGE */
body {
    font-family: 'Segoe UI', sans-serif;

    /*  BIG ROBOT BACKGROUND IMAGE */
    background: url("https://blog.credgenics.com/wp-content/uploads/2023/07/future-financial-technology-controll-by-ai-robot-huminoid-uses-machine-learning-min-scaled-2.jpg") 
                no-repeat center center fixed;
    background-size: cover;

    /* Layout */
    display: flex;
    justify-content: center;
    padding: 40px 0;
    min-height: 100vh;

    position: relative;
}

/* ðŸ”· DARK OVERLAY + GRID EFFECT (aa tamara original code mathi) */
body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;

    /* Dark transparent overlay */
    background: rgba(0, 0, 0, 0.7);

    /* Grid + Glow Overlay */
    background-image:
        radial-gradient(circle at center, rgba(33,150,243,0.1) 1px, transparent 1px),
        linear-gradient(to right, rgba(255,255,255,0.03) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,0.03) 1px, transparent 1px);

    background-size: 50px 50px, 50px 50px, 50px 50px;

    z-index: -1;
}




/* 3. CONTAINER - FORM BOX */
.container {
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    padding: 30px 40px;
    border-radius: 10px;
    border: 1px solid #00f2fe; /* Neon Blue Border */
    box-shadow:
        0 0 15px rgba(0, 242, 254, 0.6), /* Inner glow */
        0 0 30px rgba(0, 242, 254, 0.3); /* Outer glow */

    width: 90%;
    max-width: 500px;
    color: #f0f0f0;
}
.logo-container {
    text-align: center;
    margin-bottom: 20px;
}
.logo-container img {
    max-width: 100px; /* Adjust size as needed */
    height: auto;
    border-radius: 50%; /* Optional: for a rounded logo */
    border: 3px solid #00f2fe; /* Neon border around logo */
    box-shadow: 0 0 10px #00f2fe; /* Neon glow for logo */
}
/* ------------------------- */
/* 4. HEADINGS */
h2 {
    text-align: center;
    margin-bottom: 10px;
    color: #00f2fe; /* Neon Blue color */
    text-shadow: 0 0 5px rgba(0, 242, 254, 0.8);
}

h4 {
    text-align: center;
    margin-bottom: 10px;
    color: #00f2fe; /* Neon Blue color */
    text-shadow: 0 0 5px rgba(0, 242, 254, 0.8);
}
.subtitle {
    text-align: center;
    margin-bottom: 20px;
    color: #b0b0b0; /* Light grey subtitle */
}

/* 5. LABELS */
label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #00f2fe; /* Neon Blue label color */
}
/* 6. INPUTS & SELECTS */
input, select {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    background: rgba(255, 255, 255, 0.1); /* Slightly transparent input */
    color: #ffffff; /* Text color inside input */
    border: 1px solid #00f2fe;
    border-radius: 6px;
    font-size: 16px;
}
input::placeholder {
    color: #aaa; /* Placeholder text color */
}
select option {
    background: #0d1a2f; /* Dropdown options background */
    color: #ffffff;
}
select {
    appearance: none; /* Remove default dropdown arrow (optional) */
}

/* 7. PHONE WRAPPER */
.phone-wrapper {
    display: flex;
    margin-bottom: 15px;
}
.country-code {
    display: flex;
    align-items: center;
    justify-content: center;
    background: #00f2fe; /* Neon code background */
    color: #0d1a2f; /* Dark text */
    font-weight: bold;
    padding: 0 12px;
    border: 1px solid #00f2fe;
    border-right: none;
    border-radius: 6px 0 0 6px;
    min-width: 60px;
    height: 44px;
}
#phone {
    flex: 1;
    padding: 0 12px;
    background: rgba(255, 255, 255, 0.1);
    color: #ffffff;
    border: 1px solid #00f2fe;
    border-left: none;
    border-radius: 0 6px 6px 0;
    height: 44px;
}

/* 8. ERROR */
.error {
    color: #ff5757; /* Red color for error */
    font-size: 14px;
    margin-bottom: 10px;
}

/* 9. BUTTON */
button {
    width: 100%;
    padding: 12px;
    background: #00f2fe; /* Neon button color */
    color: #0d1a2f; /* Dark text on button */
    border: none;
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
    font-weight: bold;
    transition: background 0.3s, box-shadow 0.3s, opacity 0.3s;
    margin-top: 15px; /* Added margin for better spacing */
}
button:hover:not(:disabled) {
    background: #4efdff; /* Lighter neon on hover */
    box-shadow: 0 0 10px #00f2fe;
}
button:disabled {
    opacity: 0.5; /* Disabled look */
    cursor: not-allowed;
}
/* 10. MESSAGES & SUMMARY */
.hidden {
    display: none;
}
#successMsg {
    margin-top: 15px;
    color: #39ff14; /* Neon Green for success */
    font-weight: bold;
    text-align: center;
    font-size: 1.2em;
    padding: 10px;
    border: 1px solid #39ff14;
    border-radius: 6px;
    margin-bottom: 20px;
}

#summaryDisplay {
    padding: 15px;
    border-top: 1px solid rgba(0, 242, 254, 0.5);
    margin-top: 20px;
}
#summaryDisplay p {
    margin-bottom: 8px;
    line-height: 1.6;
}
#summaryDisplay strong {
    color: #4efdff;
    min-width: 150px;
    display: inline-block;
}
#regNo {
    color: #39ff14; /* Neon Green for Registration Number */
    font-size: 1.2em;
    font-weight: bold;
}
</style>
</head>
<body>
<div class="container">
<div class="logo-container">
    <img src="https://content.jdmagicbox.com/comp/morbi/n9/9999p2822.2822.190525015714.y9n9/catalogue/green-valley-international-school-lajai-morbi-schools-macp3keq3g.jpg" alt="Expo Logo">
</div>
<h2> SCIENCE , ROBO & FUN EXPO </h2>
<h4 id="mainTitle">VISITOR REGISTRATION FORM</h4>
<p class="subtitle" id="mainSubtitle">Please fill your details</p>

<form id="registrationForm">
    <label for="role">SELECT ROLE</label>
    <select id="role" required>
        <option value="">-- SELECT --</option>
        <option value="Student">STUDENT</option>
        <option value="Parent">PARENT</option>
        <option value="Other">OTHER</option>
    </select>

    <div id="studentFields" class="hidden">
        <label for="board">SELECT BOARD</label>
        <select id="board">
            <option value="">-- Select Board --</option>
            <option value="GSEB">GSEB</option>
            <option value="CBSE">CBSE</option>
        </select>

        <label for="standard">SELECT STANDARD</label>
        <select id="standard">
            <option value="">-- Select Standard --</option>
        </select>
    </div>

    <label for="name">FULL NAME</label>
    <input type="text" id="name" placeholder="Enter your full name" required>

    <label for="noOfPersons">NO OF PERSONS</label>
    <input type="number" id="noOfPersons" min="1" value="" required>

    <label for="phone">MOBILE NUMBER</label>
    <div class="phone-wrapper">
        <div class="country-code">+91</div>
        <input type="text" id="phone" placeholder="123-456-7890" maxlength="12" inputmode="numeric" required>
    </div>
    <div id="phoneError" class="error hidden">Please enter valid 10-digit number.</div>

    <button type="submit" id="submitButton">ðŸ“‹ REGISTER</button>
</form>

<div id="summaryDisplay" class="hidden">
    <div id="successMsg" class="hidden">âœ… Congratulations On The Successful Registration</div>

    <h4>REGISTRATION DETAILS</h4>
    <p><strong>Reg. No:</strong> <span id="regNo"></span></p>
    <p><strong>Role:</strong> <span id="displayRole"></span></p>
    <div id="displayStudentFields" class="hidden">
        <p><strong>Board:</strong> <span id="displayBoard"></span></p>
        <p><strong>Standard:</strong> <span id="displayStandard"></span></p>
    </div>
    <p><strong>Name:</strong> <span id="displayName"></span></p>
    <p><strong>No of Persons:</strong> <span id="displayNoOfPersons"></span></p>
    <p><strong>Mobile:</strong> <span id="displayPhone"></span></p>

    <button id="registerAnotherButton">âž• Register Another Visitor</button>
</div>

<script>
const roleSelect = document.getElementById('role');
const studentFields = document.getElementById('studentFields');
const boardSelect = document.getElementById('board');
const standardSelect = document.getElementById('standard');
const phoneInput = document.getElementById('phone');
const phoneError = document.getElementById('phoneError');
const submitButton = document.getElementById('submitButton');
const registrationForm = document.getElementById('registrationForm');
const summaryDisplay = document.getElementById('summaryDisplay');
const successMsg = document.getElementById('successMsg');
const registerAnotherButton = document.getElementById('registerAnotherButton');

const mainTitle = document.getElementById('mainTitle');
const mainSubtitle = document.getElementById('mainSubtitle');
const appsScriptUrl = "https://script.google.com/macros/s/AKfycbwPbJ060NySaL5ZLuyCasJJY29cuHYKa09bU4jDDa1x6LVpMOlJuY_-KUPqDKM_tOaU/exec";
// --- Form Logic ---
roleSelect.addEventListener('change', function() {
    if (this.value === 'Student') studentFields.classList.remove('hidden');
    else {
        studentFields.classList.add('hidden');
        boardSelect.value = '';
        standardSelect.innerHTML = '<option value="">-- Select Standard --</option>';
    }
});

boardSelect.addEventListener('change', function(){
    const stdOptions=[
        'Std 1','Std 2','Std 3','Std 4','Std 5','Std 6','Std 7','Std 8',
        'Std 9','Std 10','Std 11 Science','Std 11 Commerce',
        'Std 12 Science','Std 12 Commerce'
    ];
    standardSelect.innerHTML = '<option value="">-- Select Standard --</option>';
    stdOptions.forEach(std => {
        const opt=document.createElement('option');
        opt.value=std; opt.textContent=std;
        standardSelect.appendChild(opt);
    });
});

phoneInput.addEventListener('input', function() {
    let value=this.value.replace(/\D/g,'');
    if(value.length>10) value=value.slice(0,10);
    if(value.length>6) value=value.replace(/(\d{3})(\d{3})(\d{1,4})/, '$1-$2-$3');
    else if(value.length>3) value=value.replace(/(\d{3})(\d{1,3})/, '$1-$2');
    this.value=value;
});

// --- Submission Logic ---
registrationForm.addEventListener('submit', function(e){
    e.preventDefault();

    const role=roleSelect.value;
    const board=boardSelect.value;
    const standard=standardSelect.value;
    const name=document.getElementById('name').value.trim();
    const noOfPersons=document.getElementById('noOfPersons').value;
    const phoneFormatted=phoneInput.value.trim();
    const phoneDigits=phoneFormatted.replace(/\D/g,'');

    if(phoneDigits.length !== 10){
        phoneError.classList.remove('hidden');
        return;
    } else phoneError.classList.add('hidden');

    const entry={
        role,
        board: role==='Student'?board:'-',
        standard: role==='Student'?standard:'-',
        name,
        noOfPersons,
        // *** address property is intentionally excluded here ***
        phone:'+91'+phoneDigits
    };


    submitButton.disabled = true;
    submitButton.textContent = 'â³ Registering...';

    // Encode the data as JSON and include it in the URL
    const urlWithData = appsScriptUrl + "?data=" + encodeURIComponent(JSON.stringify(entry));

    // Send a GET request
    fetch(urlWithData, {
        method:"GET"
    })
    .then(res => res.json())
    .then(data => {
        if(data.result === 'success'){

            registrationForm.classList.add('hidden');
            mainTitle.textContent = 'REGISTRATION SUCCESSFUL!';
            mainSubtitle.classList.add('hidden'); // Subtitle àª›à«àªªàª¾àªµà«‹


            document.getElementById('regNo').textContent = data.regNo; // Apps Script àª®àª¾àª‚àª¥à«€ àª†àªµà«‡àª² RegNo
            document.getElementById('displayRole').textContent = entry.role;
            document.getElementById('displayName').textContent = entry.name;
            document.getElementById('displayNoOfPersons').textContent = entry.noOfPersons;
            document.getElementById('displayPhone').textContent = entry.phone;

            if (entry.role === 'Student') {
                document.getElementById('displayStudentFields').classList.remove('hidden');
                document.getElementById('displayBoard').textContent = entry.board;
                document.getElementById('displayStandard').textContent = entry.standard;
            } else {
                document.getElementById('displayStudentFields').classList.add('hidden');
            }

            successMsg.classList.remove('hidden');
            summaryDisplay.classList.remove('hidden');

        
            setTimeout(() => {
                successMsg.classList.add('hidden');
            }, 5000);


        } else {
            alert("âŒ Submission failed: " + data.message);
        }
    })
    .catch(err => {
        console.error(err);
        alert("âŒ Submission failed: " + err.message);
    })
    .finally(() => {

    });
});

// --- Register Another Visitor Logic ---
registerAnotherButton.addEventListener('click', function() {

    summaryDisplay.classList.add('hidden');


    registrationForm.reset();
    document.getElementById('studentFields').classList.add('hidden');
    document.getElementById('standard').innerHTML = '<option value="">-- Select Standard --</option>';


    registrationForm.classList.remove('hidden');
    mainTitle.textContent = 'VISITOR REGISTRATION FORM';
    mainSubtitle.classList.remove('hidden');

    submitButton.disabled = false;
    submitButton.textContent = 'ðŸ“‹ Register';
});
</script>
</body>
</html>
